(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[490],{1421:(e,t,l)=>{Promise.resolve().then(l.t.bind(l,6874,23)),Promise.resolve().then(l.bind(l,8145)),Promise.resolve().then(l.bind(l,5692)),Promise.resolve().then(l.bind(l,3201)),Promise.resolve().then(l.bind(l,4295))},3201:(e,t,l)=>{"use strict";l.d(t,{default:()=>n});var s=l(5155),r=l(6874),a=l.n(r),o=l(7319);function n(e){let{variant:t="light"}=e,{state:l}=(0,o._)();return(0,s.jsxs)(a(),{href:"/cart",className:"relative group",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center w-8 h-8 text-gray-700 hover:text-blue-600 transition-colors",children:[(0,s.jsx)("img",{src:"dark"===t?"/bag-dark.png":"/bag-light.png",alt:"Cart",className:"w-9 h-9"}),l.totalItems>0&&(0,s.jsx)("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-medium",children:l.totalItems>99?"99+":l.totalItems})]}),(0,s.jsx)("div",{className:"absolute right-0 top-full mt-2 w-48 bg-white border border-gray-200 rounded-md shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:(0,s.jsxs)("div",{className:"p-3",children:[(0,s.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["Cart (",l.totalItems," ",1===l.totalItems?"item":"items",")"]}),l.items.length>0&&(0,s.jsx)("div",{className:"mt-2 text-sm text-gray-600",children:(0,s.jsxs)("div",{className:"font-medium",children:["Total: ",l.total>0?"$".concat(l.total.toFixed(2)):"Free"]})})]})})]})}},4295:(e,t,l)=>{"use strict";l.d(t,{default:()=>u});var s=l(5155),r=l(6874),a=l.n(r),o=l(6766),n=l(2115),i=l(7319),c=l(2302),d=l(5695);function u(e){var t;let{product:l,config:r}=e,{addToCart:u}=(0,i._)(),[m,h]=(0,n.useState)(!1),[x,b]=(0,n.useState)(!1),[f,p]=(0,n.useState)(!1),[g,v]=(0,n.useState)(!1),[j,y]=(0,n.useState)(!1),[w,N]=(0,n.useState)(!1),_=(0,d.useRouter)();console.log("ProductCard render:",{productId:l.id,productName:l.name,unitPrice:l.unit_price,config:r,currencyList:null==r?void 0:r.currency_list,productFull:l});let k=async e=>{e&&(e.preventDefault(),e.stopPropagation()),h(!0);try{await u(l.id,1),p(!0),v(!0),y(!1),setTimeout(()=>{v(!1),y(!0),setTimeout(()=>{p(!1),y(!1)},350)},2e3)}catch(e){console.error("Failed to add to cart:",e)}finally{h(!1)}},C=async e=>{e&&(e.preventDefault(),e.stopPropagation()),b(!0);try{await u(l.id,1),_.push("/cart")}catch(e){console.error("Failed to add to cart:",e)}finally{b(!1)}},S=(null==(t=l.thumbnail_full_url)?void 0:t.path)||(l.images_full_url&&l.images_full_url.length>0?l.images_full_url[0].path:null),P=(0,c.$g)(l.unit_price,r);console.log("Price formatting:",{rawPrice:l.unit_price,formattedPrice:P,config:r});let L=l.colors_formatted&&l.colors_formatted.length>0||l.choice_options&&l.choice_options.length>0;return(0,s.jsxs)("div",{className:"bg-white border-none shadow-none rounded-md p-0 flex flex-col items-center w-full",style:{minWidth:150,maxWidth:220},children:[(0,s.jsx)(a(),{href:"/product/".concat(l.slug),className:"w-full block",children:(0,s.jsx)("div",{className:"relative w-full h-40 bg-white rounded-md border border-gray-200 overflow-hidden flex items-center justify-center",children:S?(0,s.jsx)(o.default,{src:S,alt:l.name,fill:!0,className:"object-contain rounded-md",style:{border:"1px solid #eee"}}):(0,s.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,s.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})})}),(0,s.jsxs)("div",{className:"w-full flex-1 flex flex-col items-center px-2 pt-2 pb-3",children:[(0,s.jsx)(a(),{href:"/product/".concat(l.slug),className:"w-full block",children:(0,s.jsx)("h3",{className:"text-base font-medium text-black mb-1 text-center truncate w-full",children:l.name})}),(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-3 w-full",children:[(0,s.jsx)("span",{className:"text-lg font-bold text-black",children:P}),l.discount&&Number(l.discount)>0?(0,s.jsx)("span",{className:"text-sm text-gray-400 line-through",children:(0,c.$g)(parseFloat(l.unit_price)+parseFloat(l.discount),r)}):null]}),(0,s.jsxs)("div",{className:"flex w-full gap-2 mt-auto",children:[L?(0,s.jsx)(a(),{href:"/product/".concat(l.slug),className:"flex-1",children:(0,s.jsx)("button",{className:"w-full border border-[#991b1b] text-[#991b1b] bg-transparent rounded-md py-1.5 text-sm font-medium transition-colors hover:bg-[#991b1b]/10",type:"button",children:"+ أضف"})}):(0,s.jsx)("button",{onClick:k,disabled:m||x,className:"flex-1 border border-[#991b1b] text-[#991b1b] bg-transparent rounded-md py-1.5 text-sm font-medium transition-colors hover:bg-[#991b1b]/10 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",type:"button",children:m?(0,s.jsxs)("svg",{className:"animate-spin h-5 w-5 text-[#991b1b]",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}):"+ أضف"}),L?(0,s.jsx)(a(),{href:"/product/".concat(l.slug),className:"flex-1",children:(0,s.jsx)("button",{className:"w-full bg-[#991b1b] text-white rounded-md py-1.5 text-sm font-medium transition-colors hover:bg-[#7a1818]",type:"button",children:"اشتري الآن"})}):(0,s.jsx)("button",{onClick:C,disabled:m||x,className:"flex-1 bg-[#991b1b] text-white rounded-md py-1.5 text-sm font-medium transition-colors hover:bg-[#7a1818] disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",type:"button",children:x?(0,s.jsxs)("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}):"اشتري الآن"})]})]}),f&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"fixed bottom-0 left-0 w-full h-16 flex items-center justify-center bg-green-600 text-white text-lg font-bold z-[100] shadow-lg md:hidden transition-transform duration-300\n              ".concat(g?"animate-slideUpMobile":"","\n              ").concat(j?"animate-slideDownMobile":""),style:{borderRadius:0,boxShadow:"0 -4px 24px 0 rgba(0,0,0,0.12)"},children:"تمت الاضافة بنجاح"}),(0,s.jsx)("div",{className:"hidden md:flex fixed right-6 bottom-6 px-4 py-3 bg-green-600 text-white rounded-2xl shadow-lg z-[100] text-lg font-bold animate-slideUp",style:{borderRadius:"1.5rem",boxShadow:"0 4px 24px 0 rgba(0,0,0,0.12)"},children:"تمت الاضافة بنجاح"})]})]})}},5692:(e,t,l)=>{"use strict";l.d(t,{default:()=>i});var s=l(5155),r=l(2115),a=l(7319),o=l(2302);function n(e){let{product:t,config:l,selectedColor:n,selectedOptions:i,selectedVariant:c}=e,{addToCart:d}=(0,a._)(),[u,m]=(0,r.useState)(1),[h,x]=(0,r.useState)(!1),b=e=>{e>=1&&e<=(t.current_stock||999)&&m(e)},f=c?c.price:t.unit_price,p=c?c.qty:t.current_stock,g=async()=>{if(!(p<=0)){x(!0);try{await d(t.id,u,n,i,c)}catch(e){console.error("Failed to add to cart:",e)}finally{x(!1)}}},v=p<=0;return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Quantity:"}),(0,s.jsxs)("div",{className:"flex items-center border border-gray-300 rounded-md",children:[(0,s.jsx)("button",{type:"button",onClick:()=>b(u-1),disabled:u<=1,className:"px-3 py-2 text-gray-600 hover:text-gray-800 disabled:text-gray-400 disabled:cursor-not-allowed",children:"-"}),(0,s.jsx)("input",{type:"number",min:"1",max:p||999,value:u,onChange:e=>b(parseInt(e.target.value)||1),className:"w-16 text-center border-0 focus:ring-0",disabled:v}),(0,s.jsx)("button",{type:"button",onClick:()=>b(u+1),disabled:u>=(t.current_stock||999)||v,className:"px-3 py-2 text-gray-600 hover:text-gray-800 disabled:text-gray-400 disabled:cursor-not-allowed",children:"+"})]})]}),(0,s.jsx)("button",{onClick:g,disabled:v||h,className:"w-full py-3 px-6 rounded-md font-medium transition-colors ".concat(v?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"),children:h?"Adding...":v?"Out of Stock":"Add to Cart"}),(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:["Total: ",(0,o.$g)((f-(t.discount||0))*u,l)]})]})}function i(e){let{product:t,config:l}=e,a=t.colors_formatted||[],o=t.choice_options||[],i=t.variation||[],[c,d]=(0,r.useState)(a.length>0?a[0].name:""),[u,m]=(0,r.useState)(a.length>0?a[0].code:""),[h,x]=(0,r.useState)(()=>{let e={};return o.forEach(t=>{t.options&&t.options.length>0&&(e[t.title]=t.options[0])}),e}),b=(0,r.useMemo)(()=>{let e=[];a.length>0&&c&&e.push(c),o.forEach(t=>{h[t.title]&&e.push(h[t.title])});let t=e.join("-").replace(/ /g,""),l=i.find(e=>e.type.replace(/ /g,"")===t)||null;return l&&a.length>0&&c&&(l.color_code=u),l},[c,u,h,a,o,i]),f=e=>{d(e.name),m(e.code),window.dispatchEvent(new CustomEvent("product-color-select",{detail:{colorCode:e.code}}))};return(0,s.jsxs)("div",{className:"space-y-4 mb-6",children:[a.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Color:"}),(0,s.jsx)("div",{className:"flex space-x-2",children:a.map(e=>(0,s.jsx)("button",{type:"button",className:"w-8 h-8 rounded-full border-2 flex items-center justify-center ".concat(c===e.name?"border-blue-600":"border-gray-300"),style:{backgroundColor:e.code},onClick:()=>f(e),"aria-label":e.name,children:c===e.name&&(0,s.jsx)("span",{className:"inline-block w-4 h-4 bg-white rounded-full border border-blue-600"})},e.name))})]}),o.map(e=>(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium mb-1",children:[e.title,":"]}),(0,s.jsx)("select",{className:"border rounded px-2 py-1",value:h[e.title]||"",onChange:t=>x(l=>({...l,[e.title]:t.target.value})),children:e.options.map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]},e.title)),(0,s.jsx)(n,{product:t,config:l,selectedColor:u,selectedOptions:h,selectedVariant:b})]})}},5695:(e,t,l)=>{"use strict";var s=l(8999);l.o(s,"usePathname")&&l.d(t,{usePathname:function(){return s.usePathname}}),l.o(s,"useRouter")&&l.d(t,{useRouter:function(){return s.useRouter}})},8145:(e,t,l)=>{"use strict";l.d(t,{default:()=>o});var s=l(5155),r=l(2115),a=l(6766);function o(e){var t;let{product:l}=e,o=l.images_full_url||[],[n,i]=(0,r.useState)(0);(0,r.useEffect)(()=>{i(0)},[l]);let c=(null==(t=o[n])?void 0:t.path)||null;(0,r.useEffect)(()=>{function e(e){if(e.detail&&e.detail.colorCode){var t;let s=(l.color_images_full_url||[]).find(t=>{var l,s;return(null==(l=t.color)?void 0:l.toLowerCase())===(null==(s=e.detail.colorCode)?void 0:s.replace("#","").toLowerCase())});if(s&&(null==(t=s.image_name)?void 0:t.path)){let e=o.findIndex(e=>e.path===s.image_name.path);-1!==e?i(e):u(s.image_name.path)}}}return window.addEventListener("product-color-select",e),()=>window.removeEventListener("product-color-select",e)},[l,o]);let[d,u]=(0,r.useState)(null);(0,r.useEffect)(()=>{u(null)},[n,l]);let m=e=>{i(e),u(null)};return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"relative h-96 bg-gray-200 rounded-lg overflow-hidden",children:d||c?(0,s.jsx)(a.default,{src:d||c,alt:l.name,fill:!0,className:"object-cover",priority:!0}):(0,s.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,s.jsx)("svg",{className:"w-16 h-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),(0,s.jsx)("div",{className:"grid grid-cols-4 gap-2",children:o.map((e,t)=>(0,s.jsx)("div",{className:"relative h-24 bg-gray-200 rounded-lg overflow-hidden cursor-pointer border-2",style:{borderColor:n!==t||d?"transparent":"#2563eb"},onClick:()=>m(t),children:(0,s.jsx)(a.default,{src:e.path,alt:"".concat(l.name," - Image ").concat(t+1),fill:!0,className:"object-cover"})},t))})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[874,766,319,441,684,358],()=>t(1421)),_N_E=e.O()}]);